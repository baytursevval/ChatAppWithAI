{"ast":null,"code":"var _jsxFileName = \"/home/sevo/Desktop/chat-web/src/components/Chat.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Chat({\n  user\n}) {\n  _s();\n  const [messages, setMessages] = useState([]);\n  const [text, setText] = useState(\"\");\n\n  // 1️⃣ Tüm mesajları backend’den çek\n  const fetchMessages = async () => {\n    try {\n      const res = await axios.get(\"https://localhost:5285/api/message/all\");\n      setMessages(res.data);\n    } catch (err) {\n      console.error(err);\n    }\n  };\n  useEffect(() => {\n    fetchMessages();\n    // opsiyonel: kısa aralıklarla otomatik yenileme\n    const interval = setInterval(fetchMessages, 3000);\n    return () => clearInterval(interval);\n  }, []);\n\n  // 2️⃣ Mesaj gönder\n  const sendMessage = async () => {\n    if (!text.trim()) return;\n    try {\n      const res = await axios.post(\"https://localhost:5285/api/message/send\", {\n        text,\n        senderId: user.id,\n        receiverId: 2 // test amaçlı sabit, ileride seçim yapılabilir\n      });\n\n      // Gönderilen mesajı ekle\n      setMessages(prev => [...prev, res.data]);\n      setText(\"\");\n    } catch (err) {\n      console.error(err);\n      alert(\"Mesaj gönderilemedi!\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      maxWidth: 500,\n      margin: \"20px auto\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: [\"Ho\\u015Fgeldin, \", user.nickname]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        border: \"1px solid #ccc\",\n        padding: 10,\n        minHeight: 300,\n        marginBottom: 10,\n        overflowY: \"auto\"\n      },\n      children: messages.map((msg, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: 5\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"b\", {\n          children: [msg.senderId === user.id ? \"You\" : msg.sender.nickname, \":\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 13\n        }, this), \" \", msg.text, \" \", /*#__PURE__*/_jsxDEV(\"i\", {\n          style: {\n            color: msg.sentiment === \"negative\" ? \"red\" : \"green\"\n          },\n          children: [\"(\", msg.sentiment, \" \", msg.score.toFixed(2), \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 13\n        }, this)]\n      }, idx, true, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      value: text,\n      onChange: e => setText(e.target.value),\n      placeholder: \"Mesaj yaz...\",\n      style: {\n        width: \"70%\"\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: sendMessage,\n      style: {\n        width: \"25%\",\n        marginLeft: \"5%\"\n      },\n      children: \"G\\xF6nder\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 5\n  }, this);\n}\n_s(Chat, \"Q7TTAJRzFhjaM+mpF0rSeEJ6Pls=\");\n_c = Chat;\nvar _c;\n$RefreshReg$(_c, \"Chat\");","map":{"version":3,"names":["useState","useEffect","axios","jsxDEV","_jsxDEV","Chat","user","_s","messages","setMessages","text","setText","fetchMessages","res","get","data","err","console","error","interval","setInterval","clearInterval","sendMessage","trim","post","senderId","id","receiverId","prev","alert","style","maxWidth","margin","children","nickname","fileName","_jsxFileName","lineNumber","columnNumber","border","padding","minHeight","marginBottom","overflowY","map","msg","idx","sender","color","sentiment","score","toFixed","type","value","onChange","e","target","placeholder","width","onClick","marginLeft","_c","$RefreshReg$"],"sources":["/home/sevo/Desktop/chat-web/src/components/Chat.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport axios from \"axios\";\n\nexport default function Chat({ user }) {\n  const [messages, setMessages] = useState([]);\n  const [text, setText] = useState(\"\");\n\n  // 1️⃣ Tüm mesajları backend’den çek\n  const fetchMessages = async () => {\n    try {\n      const res = await axios.get(\"https://localhost:5285/api/message/all\");\n      setMessages(res.data);\n    } catch (err) {\n      console.error(err);\n    }\n  };\n\n  useEffect(() => {\n    fetchMessages();\n    // opsiyonel: kısa aralıklarla otomatik yenileme\n    const interval = setInterval(fetchMessages, 3000);\n    return () => clearInterval(interval);\n  }, []);\n\n  // 2️⃣ Mesaj gönder\n  const sendMessage = async () => {\n    if (!text.trim()) return;\n\n    try {\n      const res = await axios.post(\"https://localhost:5285/api/message/send\", {\n        text,\n        senderId: user.id,\n        receiverId: 2, // test amaçlı sabit, ileride seçim yapılabilir\n      });\n\n      // Gönderilen mesajı ekle\n      setMessages((prev) => [...prev, res.data]);\n      setText(\"\");\n    } catch (err) {\n      console.error(err);\n      alert(\"Mesaj gönderilemedi!\");\n    }\n  };\n\n  return (\n    <div style={{ maxWidth: 500, margin: \"20px auto\" }}>\n      <h2>Hoşgeldin, {user.nickname}</h2>\n\n      <div\n        style={{\n          border: \"1px solid #ccc\",\n          padding: 10,\n          minHeight: 300,\n          marginBottom: 10,\n          overflowY: \"auto\",\n        }}\n      >\n        {messages.map((msg, idx) => (\n          <div key={idx} style={{ marginBottom: 5 }}>\n            <b>{msg.senderId === user.id ? \"You\" : msg.sender.nickname}:</b>{\" \"}\n            {msg.text}{\" \"}\n            <i style={{ color: msg.sentiment === \"negative\" ? \"red\" : \"green\" }}>\n              ({msg.sentiment} {msg.score.toFixed(2)})\n            </i>\n          </div>\n        ))}\n      </div>\n\n      <input\n        type=\"text\"\n        value={text}\n        onChange={(e) => setText(e.target.value)}\n        placeholder=\"Mesaj yaz...\"\n        style={{ width: \"70%\" }}\n      />\n      <button onClick={sendMessage} style={{ width: \"25%\", marginLeft: \"5%\" }}>\n        Gönder\n      </button>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}